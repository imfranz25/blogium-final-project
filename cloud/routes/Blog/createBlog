const createBlog = async req => {
  if (!req.user) {
    throw new Parse.Error(Parse.Error.INVALID_SESSION_TOKEN, 'Invalid session token');
  }

  try {
    const { title, description } = req.params;
    const newBlog = new Parse.Object.extend('blogs');

    newBlog.set('title', title);
    newBlog.set('description', description);
    newBlog.set('deleted_At', null);

    await newBlog.save();

    return 'Blog created';
  } catch (error) {
    throw Parse.Error(Parse.Error.INTERNAL_SERVER_ERROR, error.message);
  }
};

module.exports = createBlog;
